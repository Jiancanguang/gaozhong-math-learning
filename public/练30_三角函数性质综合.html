<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- ğŸ”„ ä¿®æ”¹â‘  -->
<title>ç»ƒ30Â·ä¸‰è§’å‡½æ•°æ€§è´¨ç»¼åˆåˆ¤æ–­</title>

<script>
window.MathJax={tex:{inlineMath:[['\\(','\\)']],displayMath:[['\\[','\\]']]},startup:{ready(){MathJax.startup.defaultReady();}}};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" async></script>
<script src="https://www.geogebra.org/apps/deployggb.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700;900&family=LXGW+WenKai+TC:wght@400;700&display=swap" rel="stylesheet">

<!-- ğŸ”’ æ¡†æ¶å›ºå®š CSS -->
<style>
:root{
  --primary:#1a365d;
  --primary-light:#2b5797;
  --primary-soft:#dbeafe;
  --primary-glow:rgba(43,87,151,0.12);
  --accent:#c2841a;
  --accent-light:#f6e5c3;
  --accent-glow:rgba(194,132,26,0.15);
  --red:#c0392b;--red-bg:#fdf2f2;
  --green:#1a7a4c;--green-bg:#ecfdf5;
  --purple:#6b21a8;--purple-bg:#faf5ff;
  --orange:#c2410c;--orange-bg:#fff7ed;
  --gray50:#f8fafc;--gray100:#f1f5f9;--gray200:#e2e8f0;--gray300:#cbd5e1;
  --gray500:#64748b;--gray700:#334155;--gray900:#0f172a;
  --bg:#f5f0e8;
  --card-bg:#fffefa;
  --card-active-bg:#f0f4ff;
  --card-active-border:var(--primary-light);
  --card-done-bg:#f0faf5;
  --card-done-border:#86cfac;
  --fs-base:22px;--fs-scale:1;
  --font-display:'LXGW WenKai TC','Noto Serif SC',serif;
  --font-body:'Noto Serif SC','Source Han Serif CN','STSong',serif;
  --radius:14px;
  --shadow-sm:0 1px 3px rgba(0,0,0,0.06),0 1px 2px rgba(0,0,0,0.04);
  --shadow-md:0 4px 20px rgba(0,0,0,0.07),0 2px 8px rgba(0,0,0,0.04);
  --shadow-lg:0 10px 40px rgba(0,0,0,0.1),0 4px 16px rgba(0,0,0,0.05);
  --shadow-glow:0 0 30px rgba(43,87,151,0.08);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;overflow:hidden;
  font-family:var(--font-body);
  font-size:calc(var(--fs-base)*var(--fs-scale));line-height:1.7;
  color:var(--gray900);background:var(--bg);}
body{display:flex;flex-direction:column;}
body::before{
  content:'';position:fixed;inset:0;z-index:-1;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(43,87,151,0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(194,132,26,0.04) 0%, transparent 50%),
    linear-gradient(180deg, #f5f0e8 0%, #ede7db 100%);
}

/* ===== TOP BAR ===== */
#topbar{
  position:fixed;top:0;left:0;right:0;height:56px;z-index:100;
  background:linear-gradient(135deg,#0f2645 0%,#1a365d 40%,#2b5797 100%);
  color:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 32px;
  font-size:0.82rem;
  box-shadow:0 3px 20px rgba(15,38,69,0.25);
  border-bottom:2px solid rgba(194,132,26,0.4);
}
#topbar .title{font-family:var(--font-display);font-weight:700;font-size:1rem;letter-spacing:2px;text-shadow:0 1px 4px rgba(0,0,0,0.2);}
#topbar .progress{opacity:.85;font-size:0.76rem;font-family:var(--font-body);background:rgba(255,255,255,0.1);padding:4px 16px;border-radius:20px;backdrop-filter:blur(4px);}

/* ===== BOTTOM BAR ===== */
#bottombar{
  position:fixed;bottom:0;left:0;right:0;height:66px;z-index:100;
  background:rgba(245,240,232,0.92);backdrop-filter:blur(12px);
  border-top:1.5px solid var(--gray200);
  display:flex;align-items:center;justify-content:center;gap:10px;padding:0 20px;flex-wrap:wrap;
}
#bottombar button{
  height:44px;min-width:44px;padding:0 18px;border:1.5px solid var(--gray300);border-radius:10px;
  background:#fff;color:var(--gray700);font-size:0.72rem;font-weight:600;cursor:pointer;
  transition:all .25s cubic-bezier(.4,0,.2,1);display:inline-flex;align-items:center;gap:6px;
  font-family:var(--font-body);box-shadow:var(--shadow-sm);
}
#bottombar button:hover:not(:disabled){border-color:var(--primary-light);color:var(--primary);box-shadow:0 2px 12px rgba(43,87,151,0.15);transform:translateY(-1px);}
#bottombar button:active:not(:disabled){transform:translateY(0);box-shadow:var(--shadow-sm);}
#bottombar button:disabled{opacity:.35;cursor:not-allowed;}
#bottombar button.primary{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;border-color:transparent;box-shadow:0 3px 12px rgba(26,54,93,0.3);}
#bottombar button.primary:hover:not(:disabled){background:linear-gradient(135deg,#0f2645,#1a365d);box-shadow:0 4px 16px rgba(26,54,93,0.4);}
#bottombar button.green{background:linear-gradient(135deg,#15803d,#16a34a);color:#fff;border-color:transparent;animation:pulseGreen 2s infinite;box-shadow:0 3px 12px rgba(22,163,74,0.3);}
#bottombar .sep{width:1px;height:28px;background:var(--gray300);opacity:.5;}
@keyframes pulseGreen{0%,100%{box-shadow:0 3px 12px rgba(22,163,74,0.3)}50%{box-shadow:0 3px 20px rgba(22,163,74,0.5),0 0 0 6px rgba(22,163,74,0.08)}}

/* ===== MAIN CONTENT ===== */
#content{margin-top:56px;margin-bottom:66px;height:calc(100vh - 56px - 66px);overflow:hidden;position:relative;}
.screen{display:none;width:100%;height:100%;position:absolute;top:0;left:0;}
.screen.active{display:flex;animation:screenIn .45s cubic-bezier(.4,0,.2,1);}
@keyframes screenIn{from{opacity:0;transform:translateY(12px) scale(0.995)}to{opacity:1;transform:translateY(0) scale(1)}}
.screen-inner{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 48px;max-width:1100px;margin:0 auto;overflow:hidden;}
.screen-inner h2{font-family:var(--font-display);font-size:1.5rem;color:var(--primary);margin-bottom:24px;font-weight:700;letter-spacing:2px;position:relative;}
.screen-inner h2::after{content:'';display:block;width:60px;height:3px;background:linear-gradient(90deg,var(--accent),transparent);border-radius:2px;margin:10px auto 0;}

/* Split layout */
.split-layout{display:flex;width:100%;height:100%;}
.split-left{flex:0 0 55%;height:100%;overflow-y:auto;padding:24px 28px 24px 32px;position:relative;background:var(--card-bg);}
.split-left::-webkit-scrollbar{width:5px;}
.split-left::-webkit-scrollbar-track{background:transparent;}
.split-left::-webkit-scrollbar-thumb{background:var(--gray300);border-radius:10px;}
.split-right{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;position:relative;overflow:hidden;border-left:3px solid var(--primary);background:linear-gradient(180deg,#fafbfc 0%,#f0f4f8 100%);}
.split-right canvas{width:100%;height:100%;border-radius:8px;background:#fafbfc;}
.split-right .ggb-container{width:100%;height:100%;}

/* ===== ç¯èŠ‚1 styles ===== */
.review-layout{width:100%;max-width:1100px;display:flex;flex-direction:column;gap:16px;height:100%;}
.hero-card{background:var(--card-bg);border-radius:18px;padding:28px 40px 28px 36px;display:flex;align-items:flex-start;gap:24px;box-shadow:var(--shadow-md);border:2px solid var(--gray200);position:relative;overflow:hidden;flex-shrink:0;animation:heroIn .5s cubic-bezier(.4,0,.2,1);}
@keyframes heroIn{from{opacity:0;transform:translateY(-10px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}
.hero-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary),var(--accent) 60%,transparent);}
.hero-card::after{content:'';position:absolute;top:0;right:0;width:200px;height:200px;background:radial-gradient(circle at top right, rgba(194,132,26,0.05) 0%, transparent 70%);pointer-events:none;}
.hero-badge{flex-shrink:0;width:56px;height:56px;background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;border-radius:14px;display:flex;align-items:center;justify-content:center;font-family:var(--font-display);font-size:0.82rem;font-weight:900;letter-spacing:1px;box-shadow:0 4px 16px rgba(26,54,93,0.25);margin-top:2px;}
.hero-body{flex:1;min-width:0;}
.hero-stem{font-size:0.95rem;color:var(--gray900);line-height:2;}
.hero-stem .kw{color:var(--red);font-weight:700;background:var(--red-bg);padding:1px 8px;border-radius:4px;}
.review-columns{display:grid;grid-template-columns:1fr 1fr;gap:16px;flex:1;min-height:0;}
.review-col-card{background:var(--card-bg);border:2px solid var(--gray200);border-radius:16px;padding:20px 24px;box-shadow:var(--shadow-sm);transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;display:flex;flex-direction:column;}
.review-col-card::before{content:'';position:absolute;top:0;left:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--primary),var(--primary-light));border-radius:2px 0 0 2px;opacity:0;transition:opacity .3s;}
.review-col-card:hover{box-shadow:var(--shadow-md);border-color:var(--primary-soft);}
.review-col-card:hover::before,.review-col-card.revealed::before{opacity:1;}
.col-card-header{display:flex;align-items:center;gap:10px;margin-bottom:12px;flex-shrink:0;}
.col-card-header .col-icon{font-size:1.1rem;}
.col-card-header .col-title{font-family:var(--font-display);font-size:0.88rem;font-weight:700;color:var(--primary);position:relative;}
.col-card-header .col-title::after{content:'';display:block;width:28px;height:2.5px;background:linear-gradient(90deg,var(--accent),transparent);border-radius:2px;margin-top:4px;}
.review-col-card .cond-item{font-size:0.78rem;color:var(--gray700);line-height:1.85;padding:5px 0 5px 10px;border-left:2px solid transparent;transition:border-color .3s;}
.review-col-card.revealed .cond-item{animation:condIn .4s ease both;border-left-color:var(--primary-soft);}
.review-col-card.revealed .cond-item:nth-child(1){animation-delay:.05s}
.review-col-card.revealed .cond-item:nth-child(2){animation-delay:.12s}
.review-col-card.revealed .cond-item:nth-child(3){animation-delay:.19s}
.review-col-card.revealed .cond-item:nth-child(4){animation-delay:.26s}
.review-col-card .reveal-content{flex:1;}
.review-col-card .reveal-overlay .reveal-btn{padding:10px 22px;font-size:0.72rem;border-radius:12px;}

/* äº¤äº’å¼æ­ç¤º */
.reveal-section{position:relative;overflow:hidden;}
.reveal-section .reveal-content{filter:blur(6px);pointer-events:none;user-select:none;transition:filter .5s ease,opacity .5s ease;opacity:.4;}
.reveal-section.revealed .reveal-content{filter:none;pointer-events:auto;user-select:auto;opacity:1;}
.reveal-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:5;cursor:pointer;transition:opacity .4s;background:radial-gradient(ellipse at center, rgba(255,254,250,0.6), transparent 70%);}
.reveal-overlay .reveal-btn{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;border:none;border-radius:14px;padding:14px 32px;font-size:0.78rem;font-weight:700;cursor:pointer;box-shadow:0 6px 24px rgba(26,54,93,0.3);transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;gap:8px;font-family:var(--font-body);letter-spacing:0.5px;}
.reveal-overlay .reveal-btn:hover{box-shadow:0 8px 32px rgba(26,54,93,0.4);transform:translateY(-3px) scale(1.02);}
.reveal-section.revealed .reveal-overlay{opacity:0;pointer-events:none;}
.cond-item{font-size:0.82rem;color:var(--gray700);line-height:1.9;padding:6px 0 6px 12px;border-left:2px solid transparent;transition:border-color .3s;}
.reveal-section.revealed .cond-item{animation:condIn .4s ease both;border-left-color:var(--primary-soft);}
.reveal-section.revealed .cond-item:nth-child(1){animation-delay:.05s}
.reveal-section.revealed .cond-item:nth-child(2){animation-delay:.12s}
.reveal-section.revealed .cond-item:nth-child(3){animation-delay:.19s}
.reveal-section.revealed .cond-item:nth-child(4){animation-delay:.26s}
@keyframes condIn{from{opacity:0;transform:translateX(-8px)}to{opacity:1;transform:translateX(0)}}

/* ===== STEP CARDS ===== */
.step-card{border:2px solid var(--gray200);border-radius:var(--radius);padding:20px 24px;margin-bottom:14px;background:var(--card-bg);transition:all .3s cubic-bezier(.4,0,.2,1);display:none;position:relative;box-shadow:var(--shadow-sm);}
.step-card.visible{display:block;animation:cardIn .35s cubic-bezier(.4,0,.2,1);}
@keyframes cardIn{from{opacity:0;transform:translateX(-12px)}to{opacity:1;transform:translateX(0)}}
.step-card.active{border-color:var(--card-active-border);background:var(--card-active-bg);box-shadow:var(--shadow-md),0 0 0 3px var(--primary-glow);}
.step-card.done{border-color:var(--card-done-border);background:var(--card-done-bg);opacity:.85;}
.step-card .step-tag{display:inline-block;font-size:0.62rem;font-weight:700;padding:3px 12px;border-radius:20px;margin-bottom:8px;letter-spacing:1px;text-transform:uppercase;}
.step-card.active .step-tag{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;box-shadow:0 2px 8px rgba(26,54,93,0.2);}
.step-card.done .step-tag{background:var(--card-done-border);color:#0f4a2e;}
.step-card .step-title{font-family:var(--font-display);font-size:0.92rem;font-weight:700;color:var(--gray900);margin-bottom:6px;}
.step-card .step-body{font-size:0.82rem;color:var(--gray700);line-height:1.8;}
.step-card .step-body .highlight-red{color:var(--red);font-weight:700;}
.step-card .step-body .highlight-purple{color:var(--purple);font-weight:700;}
.step-card .step-body .highlight-green{color:var(--green);font-weight:700;}
/* æ•™å­¦è¯æœ¯ â€” æŠ•å±éšå½¢è®¾è®¡ */
.step-card .teach{font-size:0.66rem;color:rgba(190,190,190,0.38);margin-top:10px;padding:8px 14px;background:rgba(0,0,0,0.008);border-radius:10px;border-left:1.5px solid rgba(200,200,200,0.22);line-height:1.6;font-style:italic;letter-spacing:0.3px;}
.step-card:hover{transform:translateX(2px);}
#canvas-banner{position:absolute;top:10px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--accent),#d4a034);color:#fff;font-size:0.66rem;font-weight:700;padding:5px 18px;border-radius:20px;z-index:10;display:none;white-space:nowrap;box-shadow:0 3px 12px rgba(194,132,26,0.3);letter-spacing:0.5px;}
.completed-banner{font-family:var(--font-display);font-size:0.88rem;font-weight:700;color:var(--green);text-align:center;padding:16px;border:2px solid var(--green);border-radius:12px;background:var(--green-bg);margin-top:12px;display:none;box-shadow:0 2px 12px rgba(26,122,76,0.1);}

/* ===== éš¾åº¦åˆ†çº§æ¡ styles ===== */
.difficulty-strip{
  flex-shrink:0;background:var(--card-bg);border:2px solid var(--gray200);
  border-radius:14px;padding:12px 24px;box-shadow:var(--shadow-sm);
  display:flex;align-items:center;gap:18px;flex-wrap:wrap;
  animation:heroIn .5s cubic-bezier(.4,0,.2,1);
  animation-delay:.1s;animation-fill-mode:both;
  position:relative;overflow:hidden;
}
.difficulty-strip::before{
  content:'';position:absolute;top:0;left:0;bottom:0;width:4px;
  border-radius:2px 0 0 2px;
}
.difficulty-strip.diff-benke::before{background:linear-gradient(180deg,#16a34a,#22c55e);}
.difficulty-strip.diff-erben::before{background:linear-gradient(180deg,#2b5797,#3b82f6);}
.difficulty-strip.diff-tekong::before{background:linear-gradient(180deg,#6b21a8,#a855f7);}
.difficulty-strip.diff-985::before{background:linear-gradient(180deg,#c2841a,#eab308);}

.diff-header{display:flex;align-items:center;gap:10px;flex-shrink:0;}
.diff-icon{font-size:0.92rem;}
.diff-level-badge{
  display:inline-block;font-size:0.64rem;font-weight:800;
  padding:4px 14px;border-radius:20px;color:#fff;letter-spacing:1px;
  font-family:var(--font-display);
  box-shadow:0 2px 8px rgba(0,0,0,0.15);
}
.diff-benke .diff-level-badge{background:linear-gradient(135deg,#15803d,#16a34a);}
.diff-erben .diff-level-badge{background:linear-gradient(135deg,#1a365d,#2b5797);}
.diff-tekong .diff-level-badge{background:linear-gradient(135deg,#581c87,#6b21a8);}
.diff-985 .diff-level-badge{background:linear-gradient(135deg,#92400e,#c2841a);}

.diff-score-text{font-size:0.62rem;color:var(--gray500);font-weight:600;}
.diff-type-adj{font-size:0.58rem;color:var(--orange);font-weight:600;background:var(--orange-bg);padding:2px 8px;border-radius:6px;}

.diff-dims{display:flex;align-items:center;gap:10px;flex:1;min-width:0;flex-wrap:wrap;}
.diff-dim{display:flex;align-items:center;gap:4px;}
.diff-dim-label{font-size:0.56rem;color:var(--gray500);font-weight:600;white-space:nowrap;min-width:1.8em;text-align:right;}
.diff-dim-bar{width:44px;height:6px;background:var(--gray200);border-radius:3px;overflow:hidden;position:relative;}
.diff-dim-fill{height:100%;border-radius:3px;transition:width .6s cubic-bezier(.4,0,.2,1);}
.diff-benke .diff-dim-fill{background:linear-gradient(90deg,#16a34a,#22c55e);}
.diff-erben .diff-dim-fill{background:linear-gradient(90deg,#2b5797,#3b82f6);}
.diff-tekong .diff-dim-fill{background:linear-gradient(90deg,#6b21a8,#a855f7);}
.diff-985 .diff-dim-fill{background:linear-gradient(90deg,#c2841a,#eab308);}
.diff-dim-val{font-size:0.54rem;color:var(--gray700);font-weight:700;min-width:0.8em;}

.diff-motto{
  font-size:0.62rem;color:var(--gray500);font-style:italic;
  font-family:var(--font-display);letter-spacing:0.5px;
  padding:3px 10px;background:var(--gray50);border-radius:8px;
  border:1px solid var(--gray200);white-space:nowrap;flex-shrink:0;
}
.difficulty-strip{cursor:pointer;transition:border-color .25s,box-shadow .25s;}
.difficulty-strip:hover{border-color:var(--gray300);box-shadow:var(--shadow-md);}
.diff-toggle-hint{
  font-size:0.56rem;color:var(--gray500);font-weight:600;
  margin-left:auto;display:flex;align-items:center;gap:3px;
  opacity:.6;transition:opacity .25s;white-space:nowrap;flex-shrink:0;
}
.diff-toggle-hint .arrow{display:inline-block;transition:transform .3s ease;font-size:0.5rem;}
.difficulty-strip.expanded .diff-toggle-hint .arrow{transform:rotate(180deg);}
.difficulty-strip:hover .diff-toggle-hint{opacity:1;}

/* è¯¦ç»†äº”ç»´è¯„åˆ¤é¢æ¿ */
.diff-detail-panel{
  max-height:0;overflow:hidden;
  transition:max-height .45s cubic-bezier(.4,0,.2,1),opacity .35s ease,margin .35s ease;
  opacity:0;margin-top:0;
}
.diff-detail-panel.expanded{
  max-height:500px;opacity:1;margin-top:10px;
}
.diff-detail-inner{
  background:var(--card-bg);border:2px solid var(--gray200);
  border-radius:14px;padding:16px 20px;box-shadow:var(--shadow-sm);
  animation:cardIn .35s cubic-bezier(.4,0,.2,1);
}
.diff-detail-table{
  width:100%;border-collapse:collapse;font-size:0.72rem;line-height:1.7;
}
.diff-detail-table th{
  text-align:left;font-weight:700;color:var(--primary);
  padding:6px 10px;border-bottom:2px solid var(--gray200);
  font-family:var(--font-display);font-size:0.68rem;letter-spacing:0.5px;
}
.diff-detail-table td{
  padding:8px 10px;border-bottom:1px solid var(--gray100);
  vertical-align:top;color:var(--gray700);
}
.diff-detail-table tr:last-child td{border-bottom:none;}
.diff-detail-table .dim-name{
  font-weight:700;color:var(--gray900);white-space:nowrap;width:5.5em;
}
.diff-detail-table .dim-score{
  text-align:center;font-weight:800;width:3em;
  font-size:0.78rem;font-family:var(--font-display);
}
.diff-detail-table .dim-analysis{color:var(--gray700);font-size:0.70rem;}
.diff-detail-table tfoot td{
  border-top:2px solid var(--gray200);font-weight:800;
  padding-top:10px;color:var(--gray900);
}
.diff-detail-table tfoot .dim-score{font-size:0.88rem;}
.diff-benke .diff-detail-table .dim-score{color:#16a34a;}
.diff-erben .diff-detail-table .dim-score{color:#2b5797;}
.diff-tekong .diff-detail-table .dim-score{color:#6b21a8;}
.diff-985 .diff-detail-table .dim-score{color:#c2841a;}
.diff-benke .diff-detail-table tfoot td{color:#15803d;}
.diff-erben .diff-detail-table tfoot td{color:#1a365d;}
.diff-tekong .diff-detail-table tfoot td{color:#581c87;}
.diff-985 .diff-detail-table tfoot td{color:#92400e;}

/* hero å¡ç‰‡å³ä¸Šè§’éš¾åº¦æ ‡ç­¾ */
.hero-diff-tag{
  position:absolute;top:14px;right:20px;z-index:2;
  font-size:0.60rem;font-weight:800;padding:4px 12px;border-radius:8px;
  color:#fff;letter-spacing:0.5px;font-family:var(--font-display);
  box-shadow:0 2px 8px rgba(0,0,0,0.12);
}
.hero-diff-tag.tag-benke{background:linear-gradient(135deg,#15803d,#16a34a);}
.hero-diff-tag.tag-erben{background:linear-gradient(135deg,#1a365d,#2b5797);}
.hero-diff-tag.tag-tekong{background:linear-gradient(135deg,#581c87,#6b21a8);}
.hero-diff-tag.tag-985{background:linear-gradient(135deg,#92400e,#c2841a);}

/* ===== ç¯èŠ‚3 â€” æŒ–ç©ºå¡«ç­”æ ·å¼ ===== */
.cloze-list{list-style:none;width:100%;max-width:920px;display:flex;flex-direction:column;gap:16px;}
.cloze-card{background:var(--card-bg);border-radius:16px;padding:20px 26px;box-shadow:var(--shadow-sm);border:2px solid var(--gray200);transition:all .25s;animation:listIn .4s ease both;}
.cloze-card:nth-child(1){animation-delay:.05s}
.cloze-card:nth-child(2){animation-delay:.12s}
.cloze-card:nth-child(3){animation-delay:.19s}
.cloze-card:nth-child(4){animation-delay:.26s}
@keyframes listIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.cloze-card:hover{box-shadow:var(--shadow-md);transform:translateX(3px);}
.cloze-badge{display:inline-flex;align-items:center;gap:6px;padding:3px 14px;border-radius:20px;font-size:0.66rem;font-weight:700;color:#fff;margin-bottom:10px;letter-spacing:0.5px;}
.cloze-body{font-size:0.85rem;line-height:2;color:var(--gray900);}
.blank{display:inline-block;position:relative;cursor:pointer;vertical-align:middle;margin:0 2px;transition:all .3s;}
.blank-cover{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;font-size:0.72rem;font-weight:700;padding:2px 14px;border-radius:8px;box-shadow:0 2px 8px rgba(26,54,93,0.2);transition:all .3s;cursor:pointer;user-select:none;}
.blank-cover:hover{box-shadow:0 3px 12px rgba(26,54,93,0.35);transform:scale(1.05);}
.blank-answer{display:none;color:var(--red);font-weight:700;text-decoration:underline;text-decoration-color:rgba(192,57,43,0.3);text-underline-offset:3px;}
.blank.revealed .blank-cover{display:none;}
.blank.revealed .blank-answer{display:inline;animation:blankReveal .4s ease both;}
@keyframes blankReveal{from{opacity:0;filter:blur(4px);transform:translateY(4px)}to{opacity:1;filter:none;transform:translateY(0)}}
.cloze-toolbar{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px;padding:12px 0;border-top:1.5px solid var(--gray200);}
.cloze-counter{font-size:0.76rem;color:var(--gray500);font-weight:600;}
.cloze-btn{height:38px;padding:0 20px;border:1.5px solid var(--gray300);border-radius:10px;background:#fff;color:var(--gray700);font-size:0.68rem;font-weight:600;cursor:pointer;font-family:var(--font-body);transition:all .25s;box-shadow:var(--shadow-sm);}
.cloze-btn:hover{border-color:var(--primary-light);color:var(--primary);box-shadow:0 2px 8px rgba(43,87,151,0.12);}

/* ===== ç¯èŠ‚4 styles ===== */
.answer-sheet{width:100%;height:100%;background:linear-gradient(180deg,#fffff8 0%,#fefcf4 100%);border:2.5px solid #1e293b;border-radius:6px;padding:24px 34px 24px 68px;position:relative;box-shadow:4px 5px 20px rgba(0,0,0,0.1),inset 0 0 60px rgba(194,132,26,0.03);overflow-y:auto;}
.answer-sheet::before{content:'';position:absolute;top:0;left:52px;bottom:0;border-left:1.5px solid #fca5a5;}
.answer-sheet::after{content:'';position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(180deg,transparent,transparent 38px,rgba(148,163,184,0.08) 38px,rgba(148,163,184,0.08) 39px);}
.answer-title{font-family:var(--font-display);font-size:0.88rem;font-weight:700;text-align:center;letter-spacing:3px;border-bottom:1.5px dashed var(--gray300);padding-bottom:8px;margin-bottom:14px;position:relative;z-index:1;}
.answer-q{font-weight:700;font-size:0.85rem;color:var(--primary);margin:10px 0 8px;position:relative;z-index:1;}
.answer-line{font-size:0.82rem;line-height:1.9;color:#1e293b;padding-left:12px;position:relative;z-index:1;}
.answer-line .label{color:var(--primary);font-weight:700;margin-right:4px;}
.answer-highlight{display:inline-block;border:2.5px solid var(--red);border-radius:6px;padding:4px 14px;margin:4px 0;background:rgba(192,57,43,0.04);box-shadow:0 2px 8px rgba(192,57,43,0.1);}

/* ===== å…¨å®½æ–¹æ³•å¸ƒå±€ ===== */
.fullwidth-method{width:100%;height:100%;display:flex;justify-content:center;overflow:hidden;}
.fullwidth-method-inner{width:100%;max-width:1100px;height:100%;overflow-y:auto;padding:20px 40px;}
.fullwidth-method-inner::-webkit-scrollbar{width:5px;}
.fullwidth-method-inner::-webkit-scrollbar-track{background:transparent;}
.fullwidth-method-inner::-webkit-scrollbar-thumb{background:var(--gray300);border-radius:10px;}
.m1-steps-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.m1-steps-grid .step-card{margin-bottom:0;}
.m1-steps-grid .step-card:nth-child(1){grid-column:1 / -1;}
.m1-steps-grid .step-card:nth-child(5){grid-column:1 / -1;}

/* Method tabs */
.method-tabs{display:flex;gap:0;margin-bottom:0;}
.method-tab{padding:11px 26px;font-size:0.78rem;font-weight:700;cursor:pointer;border:2px solid var(--gray200);border-bottom:none;border-radius:12px 12px 0 0;background:var(--gray50);color:var(--gray500);transition:all .25s cubic-bezier(.4,0,.2,1);font-family:var(--font-display);}
.method-tab.active{background:var(--card-active-bg);color:var(--primary);border-color:var(--primary-light);box-shadow:0 -2px 8px rgba(43,87,151,0.08);}
.method-tab:hover:not(.active){background:var(--gray100);color:var(--gray700);}

[data-tip]{position:relative;}
[data-tip]:hover::after{content:attr(data-tip);position:absolute;bottom:115%;left:50%;transform:translateX(-50%);background:var(--gray900);color:#fff;font-size:0.58rem;padding:5px 12px;border-radius:8px;white-space:nowrap;z-index:200;box-shadow:0 4px 12px rgba(0,0,0,0.15);animation:tipIn .2s ease;}
@keyframes tipIn{from{opacity:0;transform:translateX(-50%) translateY(4px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
::selection{background:rgba(43,87,151,0.15);color:var(--gray900);}
@media(max-width:1200px){.split-left{flex:0 0 50%;}}

/* ğŸ”„ æ­¥éª¤æ•°ä¸º5ï¼Œé»˜è®¤ nth-child è§„åˆ™å·²è¦†ç›–ï¼Œæ— éœ€è¿½åŠ  */

/* ===== ğŸ”’ é¼ æ ‡èšç„¦ç³»ç»Ÿï¼ˆæ¡†æ¶å›ºå®šï¼Œä¸è¦ä¿®æ”¹ï¼‰ ===== */
.cursor-spot{
  position:fixed;pointer-events:none;z-index:9999;
  width:38px;height:38px;border-radius:50%;
  border:3px solid rgba(192,57,43,0.85);
  background:radial-gradient(circle, rgba(192,57,43,0.10) 0%, transparent 70%);
  transform:translate(-50%,-50%);
  transition:width .2s,height .2s,opacity .15s,border-color .25s,box-shadow .25s;
  box-shadow:0 0 12px 2px rgba(192,57,43,0.18);
  opacity:0;
}
.cursor-spot.active{opacity:1;}
.cursor-spot.clicking{
  width:30px;height:30px;
  border-color:rgba(194,132,26,1);
  box-shadow:0 0 24px 6px rgba(194,132,26,0.35);
}
.click-ripple{
  position:fixed;pointer-events:none;z-index:9998;
  width:14px;height:14px;border-radius:50%;
  background:rgba(192,57,43,0.45);
  transform:translate(-50%,-50%) scale(1);
  animation:rippleOut .55s cubic-bezier(.2,.6,.3,1) forwards;
}
@keyframes rippleOut{
  0%{transform:translate(-50%,-50%) scale(1);opacity:.7;}
  100%{transform:translate(-50%,-50%) scale(4.5);opacity:0;}
}
.cursor-trail{
  position:fixed;pointer-events:none;z-index:9997;
  width:8px;height:8px;border-radius:50%;
  background:rgba(192,57,43,0.35);
  transform:translate(-50%,-50%);
  animation:trailFade .45s ease forwards;
}
@keyframes trailFade{
  0%{opacity:.5;transform:translate(-50%,-50%) scale(1);}
  100%{opacity:0;transform:translate(-50%,-50%) scale(.3);}
}
#bottombar button.cursor-active{
  background:linear-gradient(135deg,var(--red),#e74c3c)!important;
  color:#fff!important;border-color:transparent!important;
  box-shadow:0 3px 12px rgba(192,57,43,0.35)!important;
}
body.cursor-mode-on{cursor:none;}
body.cursor-mode-on *{cursor:none!important;}
body.cursor-mode-on button,body.cursor-mode-on .reveal-btn,
body.cursor-mode-on .blank,body.cursor-mode-on .method-tab,
body.cursor-mode-on .difficulty-strip{cursor:none!important;}
.cursor-panel{
  position:fixed;bottom:76px;right:20px;z-index:200;
  background:var(--card-bg);border:2px solid var(--gray200);
  border-radius:16px;padding:18px 22px;box-shadow:var(--shadow-lg);
  display:none;min-width:240px;
  animation:panelIn .25s cubic-bezier(.4,0,.2,1);
}
@keyframes panelIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.cursor-panel.show{display:block;}
.cursor-panel h4{font-family:var(--font-display);font-size:0.78rem;color:var(--primary);margin-bottom:14px;letter-spacing:1px;}
.cursor-panel label{display:flex;align-items:center;gap:10px;font-size:0.68rem;color:var(--gray700);margin-bottom:10px;font-weight:600;}
.cursor-panel input[type=range]{flex:1;accent-color:var(--red);height:5px;}
.cursor-panel .val{font-size:0.62rem;color:var(--gray500);min-width:2.5em;text-align:right;}
.cursor-panel .color-row{display:flex;gap:8px;margin-top:6px;margin-bottom:8px;}
.cursor-color-btn{
  width:28px;height:28px;border-radius:50%;border:2.5px solid var(--gray200);
  cursor:pointer;transition:all .2s;box-shadow:var(--shadow-sm);
}
.cursor-color-btn:hover,.cursor-color-btn.chosen{border-color:var(--gray900);transform:scale(1.15);box-shadow:0 2px 10px rgba(0,0,0,0.2);}
.cursor-panel .toggle-row{display:flex;align-items:center;justify-content:space-between;margin-top:4px;}
.mini-toggle{width:40px;height:22px;border-radius:11px;background:var(--gray300);position:relative;cursor:pointer;transition:background .25s;border:none;padding:0;}
.mini-toggle.on{background:var(--red);}
.mini-toggle::after{content:'';position:absolute;top:2px;left:2px;width:18px;height:18px;border-radius:50%;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,0.2);transition:transform .25s;}
.mini-toggle.on::after{transform:translateX(18px);}

</style>
</head>
<body>

<!-- ===== TOP BAR ===== -->
<div id="topbar">
  <!-- ğŸ”„ ä¿®æ”¹â‘¡ -->
  <div class="title">ç»ƒ30 Â· \(f(x)=2\sin\!\left(2x+\dfrac{\pi}{6}\right)\) æ€§è´¨ç»¼åˆ</div>
  <div class="progress" id="progress-text">ç¯èŠ‚1 Â· é¢˜ç›®å›é¡¾</div>
</div>

<!-- ===== CONTENT ===== -->
<div id="content">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ”„ ä¿®æ”¹â‘¢ï¼šç¯èŠ‚1 â€” é¢˜ç›®å›é¡¾
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen active" id="s1-1" data-section="1" data-label="é¢˜ç›®å›é¡¾">
    <div class="screen-inner" style="justify-content:flex-start;padding-top:20px;">
      <div class="review-layout">
        <!-- Hero é¢˜å¹²å¡ç‰‡ -->
        <div class="hero-card">
          <div class="hero-badge">ç»ƒ 30</div>
          <div class="hero-body">
            <div class="hero-stem">
              å·²çŸ¥å‡½æ•° \(f(x) = 2\sqrt{3}\sin x\cos x - 2\sin^2 x + 1\)ï¼Œåˆ™ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼ˆ ï¼‰<br>
              A. å°† \(f(x)\) çš„å›¾è±¡å‘å³å¹³ç§» \(\dfrac{\pi}{3}\) ä¸ªå•ä½é•¿åº¦ï¼Œå¾—åˆ° \(g(x)=2\cos 2x\) çš„å›¾è±¡<br>
              B. \(f(x)\) åœ¨ \(\left[0,\dfrac{\pi}{4}\right]\) ä¸Šçš„å€¼åŸŸä¸º <span class="kw">\([1,\sqrt{3}]\)</span><br>
              C. è‹¥ \(f(x_1)=f(x_2)=\sqrt{3}\;(x_1\neq x_2)\)ï¼Œåˆ™ \(x_1-x_2=k\pi+\dfrac{\pi}{3},\;k\in\mathbb{Z}\)<br>
              D. \(f(x)\) çš„å›¾è±¡å…³äºç‚¹ \(\left(-\dfrac{\pi}{12},0\right)\) <span class="kw">ä¸­å¿ƒå¯¹ç§°</span>
            </div>
          </div>
          <div class="hero-diff-tag tag-erben">äºŒæœ¬çº¿</div>
        </div>

        <!-- éš¾åº¦åˆ†çº§æ¡ -->
        <div class="difficulty-strip diff-erben" onclick="toggleDiffDetail()">
          <div class="diff-header">
            <span class="diff-icon">ğŸ“Š</span>
            <span class="diff-level-badge">äºŒæœ¬çº¿</span>
            <span class="diff-score-text">æ€»åˆ† 11/20</span>
          </div>
          <div class="diff-dims">
            <div class="diff-dim"><span class="diff-dim-label">çŸ¥è¯†</span><div class="diff-dim-bar"><div class="diff-dim-fill" style="width:75%"></div></div><span class="diff-dim-val">3</span></div>
            <div class="diff-dim"><span class="diff-dim-label">æ€ç»´</span><div class="diff-dim-bar"><div class="diff-dim-fill" style="width:75%"></div></div><span class="diff-dim-val">3</span></div>
            <div class="diff-dim"><span class="diff-dim-label">è¿ç®—</span><div class="diff-dim-bar"><div class="diff-dim-fill" style="width:50%"></div></div><span class="diff-dim-val">2</span></div>
            <div class="diff-dim"><span class="diff-dim-label">éšå«</span><div class="diff-dim-bar"><div class="diff-dim-fill" style="width:50%"></div></div><span class="diff-dim-val">2</span></div>
            <div class="diff-dim"><span class="diff-dim-label">å»ºæ¨¡</span><div class="diff-dim-bar"><div class="diff-dim-fill" style="width:25%"></div></div><span class="diff-dim-val">1</span></div>
          </div>
          <div class="diff-motto">ã€ŒçŸ¥é“æ–¹å‘ï¼Œéœ€è¦æ‹å¼¯ã€</div>
          <span class="diff-toggle-hint"><span class="arrow">â–¼</span> è¯¦æƒ…</span>
        </div>

        <!-- äº”ç»´è¯„åˆ¤è¯¦æƒ…é¢æ¿ -->
        <div class="diff-detail-panel" id="diffDetailPanel">
          <div class="diff-detail-inner">
            <table class="diff-detail-table">
              <thead>
                <tr><th>ç»´åº¦</th><th style="text-align:center">å¾—åˆ†</th><th>åˆ†æ</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td class="dim-name">çŸ¥è¯†ç‚¹æ•°é‡</td>
                  <td class="dim-score">3</td>
                  <td class="dim-analysis">ä¸‰è§’æ’ç­‰å˜æ¢ï¼ˆäºŒå€è§’+è¾…åŠ©è§’ï¼‰+ å›¾åƒå¹³ç§»è§„åˆ™ + ä¸‰è§’å‡½æ•°æ€§è´¨ï¼ˆå€¼åŸŸã€å¯¹ç§°ä¸­å¿ƒã€æ–¹ç¨‹è§£é›†ï¼‰ï¼Œ3ä¸ªçŸ¥è¯†ç‚¹è·¨èŠ‚ç»¼åˆ</td>
                </tr>
                <tr>
                  <td class="dim-name">æ€ç»´è½¬åŒ–</td>
                  <td class="dim-score">3</td>
                  <td class="dim-analysis">åŒ–ç®€éœ€ä¸¤æ­¥å˜æ¢ï¼›å››ä¸ªé€‰é¡¹å„éœ€ç‹¬ç«‹åˆ†æï¼ˆå¹³ç§»ã€å¤åˆå‡½æ•°å€¼åŸŸã€ä¸¤æ—è§£å·®å€¼ã€å¯¹ç§°ä¸­å¿ƒï¼‰ï¼Œæ–¹æ³•é€‰æ‹©å¤š</td>
                </tr>
                <tr>
                  <td class="dim-name">è¿ç®—å¤æ‚åº¦</td>
                  <td class="dim-score">2</td>
                  <td class="dim-analysis">åŒ–ç®€ä¸ºå¥—è·¯è¿ç®—ï¼›å„é€‰é¡¹éªŒè¯è®¡ç®—é‡é€‚ä¸­ï¼Œé€‰é¡¹Céœ€å¤„ç†ä¸¤æ—è§£çš„å·®å€¼ç»„åˆ</td>
                </tr>
                <tr>
                  <td class="dim-name">éšå«æ¡ä»¶</td>
                  <td class="dim-score">2</td>
                  <td class="dim-analysis">â‘  é€‰é¡¹Bä¸­è§’åº¦èŒƒå›´æ¢ç®— \(2x+\frac{\pi}{6}\in[\frac{\pi}{6},\frac{2\pi}{3}]\)ï¼›â‘¡ é€‰é¡¹Cä¸­ \(\sin\theta=\frac{\sqrt{3}}{2}\) æœ‰ä¸¤æ—è§£</td>
                </tr>
                <tr>
                  <td class="dim-name">é˜…è¯»ä¸å»ºæ¨¡</td>
                  <td class="dim-score">1</td>
                  <td class="dim-analysis">çº¯æ•°å­¦è¡¨è¾¾ï¼Œè¯»é¢˜å³å¯åŠ¨ç¬”</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td class="dim-name">æ€»åˆ†</td>
                  <td class="dim-score">11</td>
                  <td class="dim-analysis">â†’ äºŒæœ¬çº¿çº§åˆ«ï¼ˆ60-85åˆ†ï¼‰Â· å•é€‰é¢˜æ— é¢˜å‹ä¿®æ­£</td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <!-- åŒåˆ—æ­ç¤ºå¡ç‰‡ -->
        <div class="review-columns">
          <div class="review-col-card reveal-section" id="revealCard">
            <div class="col-card-header">
              <span class="col-icon">ğŸ”‘</span>
              <span class="col-title">å·²çŸ¥æ¡ä»¶åˆ†æ</span>
            </div>
            <div class="reveal-content" id="revealContent">
              <div class="cond-item">â‘  \(f(x)=2\sqrt{3}\sin x\cos x - 2\sin^2 x + 1\)ï¼Œå« \(\sin x\cos x\) å’Œ \(\sin^2 x\) â†’ äºŒå€è§’ä¿¡å·</div>
              <div class="cond-item">â‘¡ å››ä¸ªé€‰é¡¹åˆ†åˆ«è€ƒæŸ¥ï¼šå›¾åƒå¹³ç§»(A)ã€åŒºé—´å€¼åŸŸ(B)ã€æ–¹ç¨‹è§£å·®(C)ã€å¯¹ç§°ä¸­å¿ƒ(D)</div>
              <div class="cond-item">â‘¢ åŒ–ç®€å \(f(x)=2\sin(2x+\frac{\pi}{6})\)ï¼šæŒ¯å¹…2ï¼Œå‘¨æœŸ \(\pi\)ï¼Œåˆç›¸ \(\frac{\pi}{6}\)</div>
              <div class="cond-item">â‘£ éœ€è¦é€é¡¹éªŒè¯ï¼Œä¸èƒ½åªéªŒè¯ä¸€ä¸ªé€‰é¡¹å°±é€‰ç­”æ¡ˆ</div>
            </div>
            <div class="reveal-overlay" id="revealOverlay">
              <button class="reveal-btn" onclick="revealConditions()">ğŸ” ç‚¹å‡»æ­ç¤º <span style="font-size:.55rem;opacity:.6">ç©ºæ ¼é”®</span></button>
            </div>
          </div>
          <div class="review-col-card reveal-section" id="revealCard2">
            <div class="col-card-header">
              <span class="col-icon">ğŸ“</span>
              <span class="col-title">æ ¸å¿ƒçŸ¥è¯†</span>
            </div>
            <div class="reveal-content" id="revealContent2">
              <div class="cond-item">â‘  äºŒå€è§’å…¬å¼ï¼š\(2\sin x\cos x=\sin 2x\)ï¼Œ\(2\sin^2 x=1-\cos 2x\)</div>
              <div class="cond-item">â‘¡ è¾…åŠ©è§’å…¬å¼ï¼š\(a\sin\theta+b\cos\theta=\sqrt{a^2+b^2}\sin(\theta+\varphi)\)</div>
              <div class="cond-item">â‘¢ æ­£å¼¦å‡½æ•°å¯¹ç§°ä¸­å¿ƒåœ¨é›¶ç‚¹å¤„ï¼šä»¤ \(\sin(\omega x+\varphi)=0\) è§£å‡º \(x\)</div>
              <div class="cond-item">â‘£ \(\sin\alpha=k\) çš„é€šè§£æœ‰ä¸¤æ—ï¼š\(\alpha=\arcsin k+2n\pi\) æˆ– \(\alpha=\pi-\arcsin k+2n\pi\)</div>
            </div>
            <div class="reveal-overlay" id="revealOverlay2">
              <button class="reveal-btn" onclick="revealConditions2()">ğŸ” ç‚¹å‡»æ­ç¤º <span style="font-size:.55rem;opacity:.6">ç©ºæ ¼é”®</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ”„ ä¿®æ”¹â‘£ï¼šç¯èŠ‚2 æ–¹æ³•ä¸€ â€” ä»£æ•°é€é¡¹éªŒè¯æ³•ï¼ˆå…¨å®½å¸ƒå±€ï¼‰
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="s2-m1" data-section="2" data-label="æ–¹æ³•ä¸€ Â· ä»£æ•°é€é¡¹éªŒè¯æ³•">
    <div class="fullwidth-method">
      <div class="fullwidth-method-inner" id="left-m1">
        <div class="method-tabs">
          <div class="method-tab active" onclick="switchMethod(1)">æ–¹æ³•ä¸€ï¼šä»£æ•°é€é¡¹éªŒè¯æ³•</div>
          <div class="method-tab" onclick="switchMethod(2)">æ–¹æ³•äºŒï¼šå›¾åƒè¾…åŠ©éªŒè¯æ³•</div>
        </div>
        <div style="height:12px"></div>
        <div class="m1-steps-grid">

          <div class="step-card" id="m1-s1">
            <span class="step-tag">Step 1</span>
            <div class="step-title">ä¸‰è§’æ’ç­‰åŒ–ç®€ â†’ æ ‡å‡†æ­£å¼¦å‹</div>
            <div class="step-body">
              <span class="highlight-red">ğŸ”´ å…¨é¢˜åŸºç¡€â€”â€”åŒ–ç®€å‡ºé”™åˆ™åç»­å…¨åºŸ</span><br>
              \[f(x) = 2\sqrt{3}\sin x\cos x - 2\sin^2 x + 1\]
              äºŒå€è§’é™å¹‚ï¼š\(2\sin x\cos x = \sin 2x\)ï¼Œ\(2\sin^2 x = 1-\cos 2x\)<br>
              \[= \sqrt{3}\sin 2x - (1-\cos 2x) + 1 = \sqrt{3}\sin 2x + \cos 2x\]
              è¾…åŠ©è§’åˆä¸€ï¼š\(\sqrt{3}\sin 2x + \cos 2x = 2\sin\!\left(2x+\dfrac{\pi}{6}\right)\)<br>
              <span class="highlight-green">âœ… å¾—åˆ° \(f(x)=2\sin\!\left(2x+\dfrac{\pi}{6}\right)\)</span>
            </div>
            <div class="teach">ğŸ’¬ "æ‹¿åˆ°ä¸‰è§’åŒ–ç®€é¢˜ï¼Œç¬¬ä¸€æ­¥æ°¸è¿œæ˜¯'çœ‹æœ‰æ²¡æœ‰äºŒå€è§’'ã€‚æœ‰ sinxcosx å°±ç”¨äºŒå€è§’é™å¹‚ï¼Œæœ‰ sinÂ²x å°±ç”¨ä½™å¼¦äºŒå€è§’æ›¿æ¢ã€‚æœ€åç»Ÿä¸€æˆ asinÎ¸+bcosÎ¸ çš„å½¢å¼ï¼Œç”¨è¾…åŠ©è§’å…¬å¼åˆä¸€ã€‚"</div>
          </div>

          <div class="step-card" id="m1-s2">
            <span class="step-tag">Step 2</span>
            <div class="step-title">éªŒè¯é€‰é¡¹ A â€” å›¾åƒå¹³ç§»</div>
            <div class="step-body">
              å‘å³å¹³ç§» \(\dfrac{\pi}{3}\)ï¼šç”¨ \(x-\dfrac{\pi}{3}\) æ›¿æ¢ \(x\)ï¼š<br>
              \[f\!\left(x-\frac{\pi}{3}\right)=2\sin\!\left(2x-\frac{2\pi}{3}+\frac{\pi}{6}\right)=2\sin\!\left(2x-\frac{\pi}{2}\right)=-2\cos 2x\]
              <span class="highlight-purple">âš ï¸ \(\sin(x-\frac{\pi}{2})=-\cos x\) è€Œé \(\cos x\)ï¼Œå·®ä¸€ä¸ªè´Ÿå·ï¼</span><br>
              å¾—åˆ° \(-2\cos 2x \neq 2\cos 2x\) â†’ <span class="highlight-red">A é”™è¯¯ âœ—</span>
            </div>
            <div class="teach">ğŸ’¬ "å¹³ç§»å£è¯€'å·¦åŠ å³å‡'â€”â€”å‘å³å¹³ç§»å°±æ˜¯æŠŠ x æ¢æˆ x-Ï€/3ã€‚ä»£å®Œä¹‹ååˆ«æ€¥ç€åˆ¤æ–­ï¼Œä¸€å®šè¦æŠŠè§’åº¦åŒ–ç®€åˆ°æœ€ç®€å½¢å¼å†è·Ÿé€‰é¡¹æ¯”å¯¹ã€‚"</div>
          </div>

          <div class="step-card" id="m1-s3">
            <span class="step-tag">Step 3</span>
            <div class="step-title">éªŒè¯é€‰é¡¹ B â€” åŒºé—´å€¼åŸŸ</div>
            <div class="step-body">
              <span class="highlight-red">ğŸ”´ å…³é”®ï¼šå…ˆç®—å†…å±‚è§’èŒƒå›´</span><br>
              \(x\in\left[0,\frac{\pi}{4}\right]\) â†’ \(2x+\frac{\pi}{6}\in\left[\frac{\pi}{6},\frac{2\pi}{3}\right]\)<br>
              åœ¨ \(\left[\frac{\pi}{6},\frac{2\pi}{3}\right]\) ä¸Š sin å…ˆå¢åå‡ï¼ˆ\(\frac{\pi}{2}\) å¤„å–æœ€å¤§å€¼1ï¼‰ï¼š<br>
              æœ€å°å€¼ \(=\sin\frac{\pi}{6}=\frac{1}{2}\)ï¼Œæœ€å¤§å€¼ \(=\sin\frac{\pi}{2}=1\)<br>
              \(f(x)\in[2\times\frac{1}{2},\;2\times 1]=[1,2]\)<br>
              <span class="highlight-green">âœ… å€¼åŸŸæ˜¯ \([1,2]\) ä¸æ˜¯ \([1,\sqrt{3}]\)</span> â†’ <span class="highlight-red">B é”™è¯¯ âœ—</span>
            </div>
            <div class="teach">ğŸ’¬ "æ±‚å¤åˆå‡½æ•°å€¼åŸŸä¸‰æ­¥èµ°ï¼šç¬¬ä¸€æ­¥ç®—å†…å±‚è§’çš„èŒƒå›´ï¼Œç¬¬äºŒæ­¥çœ‹ sin åœ¨è¿™ä¸ªèŒƒå›´ä¸Šçš„æœ€å¤§æœ€å°å€¼ï¼Œç¬¬ä¸‰æ­¥ä¹˜ä»¥æŒ¯å¹…ã€‚æ³¨æ„ç«¯ç‚¹å€¼ f(Ï€/4)=âˆš3 ä¸æ˜¯æœ€å¤§å€¼â€”â€”æœ€å¤§å€¼åœ¨ x=Ï€/6 å¤„å–åˆ°ï¼Œæ˜¯2ã€‚"</div>
          </div>

          <div class="step-card" id="m1-s4">
            <span class="step-tag">Step 4</span>
            <div class="step-title">éªŒè¯é€‰é¡¹ C â€” æ–¹ç¨‹è§£çš„å·®å€¼</div>
            <div class="step-body">
              \(f(x)=\sqrt{3}\) â†’ \(\sin\!\left(2x+\frac{\pi}{6}\right)=\frac{\sqrt{3}}{2}\)<br>
              <span class="highlight-purple">âš ï¸ sin æ–¹ç¨‹å¿…é¡»å†™ä¸¤æ—é€šè§£ï¼</span><br>
              ç¬¬ä¸€æ—ï¼š\(2x+\frac{\pi}{6}=\frac{\pi}{3}+2n\pi\) â†’ \(x=\frac{\pi}{12}+n\pi\)<br>
              ç¬¬äºŒæ—ï¼š\(2x+\frac{\pi}{6}=\frac{2\pi}{3}+2n\pi\) â†’ \(x=\frac{\pi}{4}+n\pi\)<br>
              å¼‚æ—åšå·®ï¼š\(x_1-x_2 = k\pi \pm \frac{\pi}{6}\)ï¼ˆä¸æ˜¯ \(k\pi+\frac{\pi}{3}\)ï¼‰<br>
              â†’ <span class="highlight-red">C é”™è¯¯ âœ—</span>
            </div>
            <div class="teach">ğŸ’¬ "sinæ–¹ç¨‹ä¸€å®šè¦å†™å®Œæ•´çš„é€šè§£â€”â€”ä¸¤æ—ï¼'åŒæ—åšå·®å¾—kÏ€ï¼Œå¼‚æ—åšå·®å¾—kÏ€åŠ å‡æŸä¸ªå€¼'ã€‚åªå†™ä¸€æ—å°±åˆ¤æ–­ï¼Œåæœ‰å…«ä¹æ‰å‘ã€‚"</div>
          </div>

          <div class="step-card" id="m1-s5">
            <span class="step-tag">Step 5</span>
            <div class="step-title">éªŒè¯é€‰é¡¹ D â€” å¯¹ç§°ä¸­å¿ƒ</div>
            <div class="step-body">
              æ­£å¼¦å‡½æ•° \(y=A\sin(\omega x+\varphi)\) çš„å¯¹ç§°ä¸­å¿ƒï¼šä»¤ \(\omega x+\varphi=k\pi\)ï¼Œå³é›¶ç‚¹å¤„<br>
              ä»¤ \(2x+\frac{\pi}{6}=k\pi\)ï¼Œå– \(k=0\)ï¼š\(x=-\frac{\pi}{12}\)<br>
              éªŒè¯ï¼š\(f\!\left(-\frac{\pi}{12}\right)=2\sin(0)=0\) âœ“<br>
              \(\left(-\frac{\pi}{12},0\right)\) ç¡®å®æ˜¯å¯¹ç§°ä¸­å¿ƒ â†’ <span class="highlight-green">D æ­£ç¡® âœ” é€‰ D</span>
            </div>
            <div class="teach">ğŸ’¬ "æ­£å¼¦æ›²çº¿çš„å¯¹ç§°ä¸­å¿ƒå°±åœ¨é›¶ç‚¹å¤„ã€‚ä»¤å†…å±‚ç­‰äºkÏ€è§£å‡ºxï¼Œå†éªŒè¯å‡½æ•°å€¼ç¡®å®ä¸º0å°±è¡Œäº†ã€‚è€ƒåœºä¸ŠéªŒå®ŒDæ­£ç¡®ï¼Œå‰é¢ABCéƒ½æ’é™¤äº†ï¼Œç›´æ¥é€‰Dèµ°äººã€‚"</div>
          </div>

        </div>
        <div class="completed-banner" id="m1-done">âœ… æ–¹æ³•ä¸€å…¨éƒ¨ 5 æ­¥å·²å®Œæˆ</div>
      </div>
    </div>
    <canvas id="canvas-m1" style="display:none;"></canvas>
    <div id="canvas-banner" style="display:none;"></div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ”„ ä¿®æ”¹â‘¤ï¼šç¯èŠ‚2 æ–¹æ³•äºŒ â€” å›¾åƒè¾…åŠ©éªŒè¯æ³•ï¼ˆåˆ†æ å¸ƒå±€ï¼‰
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="s2-m2" data-section="2" data-label="æ–¹æ³•äºŒ Â· å›¾åƒè¾…åŠ©éªŒè¯æ³•">
    <div class="split-layout">
      <div class="split-left" id="left-m2">
        <div class="method-tabs">
          <div class="method-tab" onclick="switchMethod(1)">æ–¹æ³•ä¸€ï¼šä»£æ•°é€é¡¹éªŒè¯æ³•</div>
          <div class="method-tab active" onclick="switchMethod(2)">æ–¹æ³•äºŒï¼šå›¾åƒè¾…åŠ©éªŒè¯æ³•</div>
        </div>
        <div style="height:12px"></div>

        <div class="step-card" id="m2-s1">
          <span class="step-tag">Step 1</span>
          <div class="step-title">ç”»å‡ºå‡½æ•°å›¾åƒ Â· æ ‡æ³¨å…³é”®ç‚¹</div>
          <div class="step-body">
            åŒ–ç®€å¾— \(f(x)=2\sin\!\left(2x+\frac{\pi}{6}\right)\)ï¼Œç”»å‡ºä¸€ä¸ªå®Œæ•´å‘¨æœŸçš„å›¾åƒï¼š<br>
            â€¢ æŒ¯å¹… \(A=2\)ï¼Œå‘¨æœŸ \(T=\pi\)<br>
            â€¢ èµ·å§‹é›¶ç‚¹ \(x=-\frac{\pi}{12}\)ï¼Œæœ€é«˜ç‚¹ \((\frac{\pi}{6},2)\)ï¼Œæœ€ä½ç‚¹ \((\frac{2\pi}{3},-2)\)<br>
            <span class="highlight-green">âœ… äº”ç‚¹å®šä½æ³•ç”»å‡ºå®Œæ•´å›¾åƒ</span>
          </div>
          <div class="teach">ğŸ’¬ "ç”»æ­£å¼¦å›¾åƒï¼Œå…ˆæ‰¾äº”ä¸ªå…³é”®ç‚¹â€”â€”èµ·å§‹é›¶ç‚¹ã€æœ€é«˜ç‚¹ã€ä¸­é—´é›¶ç‚¹ã€æœ€ä½ç‚¹ã€ç»ˆæ­¢é›¶ç‚¹ã€‚æ ‡åœ¨åæ ‡ç³»ä¸Šè¿æˆä¸€ä¸ªå®Œæ•´å‘¨æœŸã€‚"</div>
        </div>

        <div class="step-card" id="m2-s2">
          <span class="step-tag">Step 2</span>
          <div class="step-title">å›¾åƒåˆ¤æ–­é€‰é¡¹ A å’Œ B</div>
          <div class="step-body">
            <span class="highlight-red">é€‰é¡¹Aï¼š</span>å‘å³å¹³ç§» \(\frac{\pi}{3}\) åå¾—åˆ° \(-2\cos 2x\)ï¼Œå›¾åƒä¸Šä¸‹ç¿»è½¬ â†’ <b>A é”™</b><br>
            <span class="highlight-red">é€‰é¡¹Bï¼š</span>è§‚å¯Ÿ \(x\in[0,\frac{\pi}{4}]\) åŒºé—´ï¼ˆå›¾ä¸­è“è‰²åŒºåŸŸï¼‰ï¼š<br>
            â€¢ \(f(0)=1\)ï¼ˆå·¦ç«¯ç‚¹ï¼‰ï¼Œ\(f(\frac{\pi}{6})=2\)ï¼ˆæœ€é«˜ç‚¹ï¼‰ï¼Œ\(f(\frac{\pi}{4})=\sqrt{3}\)<br>
            â€¢ å€¼åŸŸä¸º \([1,2]\) ä¸æ˜¯ \([1,\sqrt{3}]\) â†’ <b>B é”™</b>
          </div>
          <div class="teach">ğŸ’¬ "å›¾åƒæ³•åšé€‰å¡«ï¼Œçœ¼ç›å…ˆæ‰«ä¸€éæ’é™¤æ˜æ˜¾é”™çš„ã€‚Açš„å¹³ç§»ä¸€çœ‹å°±å·®ä¸ªè´Ÿå·ï¼ŒBçš„æœ€å¤§å€¼ä»å›¾ä¸Šå°±èƒ½çœ‹å‡ºæ˜¯2ä¸æ˜¯âˆš3ã€‚"</div>
        </div>

        <div class="step-card" id="m2-s3">
          <span class="step-tag">Step 3</span>
          <div class="step-title">å›¾åƒåˆ¤æ–­é€‰é¡¹ D â€” å¯¹ç§°ä¸­å¿ƒ</div>
          <div class="step-body">
            ä»å›¾åƒä¸Šçœ‹ï¼Œ\((-\frac{\pi}{12},0)\) æ­£å¥½æ˜¯æ›²çº¿ç©¿è¿‡ x è½´çš„é›¶ç‚¹<br>
            æ­£å¼¦æ›²çº¿çš„é›¶ç‚¹å¤©ç„¶å°±æ˜¯å¯¹ç§°ä¸­å¿ƒ<br>
            ä»£æ•°éªŒè¯ï¼š\(f(-\frac{\pi}{12})=2\sin(0)=0\) âœ“<br>
            <span class="highlight-green">âœ… D æ­£ç¡®</span>
          </div>
          <div class="teach">ğŸ’¬ "å¯¹ç§°ä¸­å¿ƒåœ¨å›¾ä¸Šå°±æ˜¯æ›²çº¿'ç©¿è¿‡xè½´çš„é‚£äº›ç‚¹'ã€‚çœ‹åˆ°-Ï€/12æ˜¯é›¶ç‚¹ï¼Œæ­£å¼¦æ›²çº¿çš„é›¶ç‚¹å¤©ç„¶å°±æ˜¯å¯¹ç§°ä¸­å¿ƒâ€”â€”ç›´æ¥ç¡®è®¤Dæ­£ç¡®ã€‚"</div>
        </div>

        <div class="step-card" id="m2-s4">
          <span class="step-tag">Step 4</span>
          <div class="step-title">å›¾åƒ+ä»£æ•°éªŒè¯é€‰é¡¹ C</div>
          <div class="step-body">
            ç”»æ°´å¹³çº¿ \(y=\sqrt{3}\)ï¼Œä¸æ›²çº¿æ¯å‘¨æœŸäº¤ä¸¤ç‚¹ï¼ˆå›¾ä¸­é‡‘è‰²æ ‡æ³¨ï¼‰<br>
            \(\sin(2x+\frac{\pi}{6})=\frac{\sqrt{3}}{2}\) ä¸¤æ—è§£ï¼š\(x=\frac{\pi}{12}+n\pi\) å’Œ \(x=\frac{\pi}{4}+n\pi\)<br>
            <span class="highlight-purple">âš ï¸ åŒå‘¨æœŸå†…ä¸¤äº¤ç‚¹é—´è· = \(\frac{\pi}{4}-\frac{\pi}{12}=\frac{\pi}{6}\)ï¼ˆä¸æ˜¯ \(\frac{\pi}{3}\)ï¼‰</span><br>
            â†’ <span class="highlight-red">C é”™è¯¯ âœ—</span> &nbsp; ç»¼ä¸Š <span class="highlight-green">é€‰ D</span>
          </div>
          <div class="teach">ğŸ’¬ "ç”»y=âˆš3çš„æ°´å¹³çº¿ï¼Œçœ‹å®ƒå’Œæ›²çº¿äº¤åœ¨å“ªé‡Œã€‚æ¯ä¸ªå‘¨æœŸä¸¤ä¸ªäº¤ç‚¹ï¼Œé—´è·æ˜¯Ï€/6ä¸æ˜¯Ï€/3â€”â€”ä»å›¾ä¸Šå°±èƒ½çœ‹å‡ºCä¸å¯¹ã€‚"</div>
        </div>

        <div class="completed-banner" id="m2-done">âœ… æ–¹æ³•äºŒå…¨éƒ¨ 4 æ­¥å·²å®Œæˆ</div>
      </div>
      <div class="split-right">
        <div id="canvas-banner-m2" style="position:absolute;top:10px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--accent),#d4a034);color:#fff;font-size:0.66rem;font-weight:700;padding:5px 18px;border-radius:20px;z-index:10;display:none;white-space:nowrap;box-shadow:0 3px 12px rgba(194,132,26,0.3);letter-spacing:0.5px;"></div>
        <div id="ggb-m2" class="ggb-container"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ”„ ä¿®æ”¹â‘¥ï¼šç¯èŠ‚3 â€” æ–¹æ³•æ€»ç»“ï¼ˆæŒ–ç©ºå¡«ç­”ï¼‰
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="s3" data-section="3" data-label="æ–¹æ³•æ€»ç»“">
    <div class="screen-inner">
      <h2>ğŸ“ æ–¹æ³•æ€»ç»“ Â· æŒ–ç©ºæŠ½æŸ¥</h2>
      <div class="cloze-list">

        <div class="cloze-card">
          <div class="cloze-badge" style="background:linear-gradient(135deg,#1a365d,#2b5797);">ğŸ”— æ€è·¯æµç¨‹</div>
          <div class="cloze-body">
            çœ‹åˆ° \(\sin x\cos x\) å’Œ \(\sin^2 x\) â†’
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">äºŒå€è§’é™å¹‚</span></span>
            â†’ å¾—åˆ° \(a\sin 2x+b\cos 2x\) â†’
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">è¾…åŠ©è§’å…¬å¼åˆä¸€</span></span>
            â†’ åŒ–ä¸º \(2\sin(2x+\frac{\pi}{6})\) â†’
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">é€é¡¹éªŒè¯é€‰é¡¹</span></span>
          </div>
        </div>

        <div class="cloze-card">
          <div class="cloze-badge" style="background:linear-gradient(135deg,#92400e,#c2841a);">ğŸ‘ é¢˜å‹è¯†åˆ«</div>
          <div class="cloze-body">
            çœ‹åˆ°ä¸‰è§’å‡½æ•°æ€§è´¨åˆ¤æ–­é¢˜ â†’ ç¬¬ä¸€æ­¥å¿…é¡»å…ˆ
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">åŒ–ç®€ä¸º \(A\sin(\omega x+\varphi)\)</span></span>
            ï¼Œå¯¹ç§°ä¸­å¿ƒåœ¨
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">é›¶ç‚¹å¤„</span></span>
          </div>
        </div>

        <div class="cloze-card">
          <div class="cloze-badge" style="background:linear-gradient(135deg,#581c87,#6b21a8);">âš– æ–¹æ³•å¯¹æ¯”</div>
          <div class="cloze-body">
            æ–¹æ³•ä¸€ï¼ˆä»£æ•°æ³•ï¼‰ï¼š
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">ä¸¥è°¨é€é¡¹éªŒè¯ï¼Œé€‚åˆå¤§é¢˜ä¹¦å†™</span></span>
            ï¼›æ–¹æ³•äºŒï¼ˆå›¾åƒæ³•ï¼‰ï¼š
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">å¿«é€Ÿæ’é™¤é”™è¯¯é€‰é¡¹ï¼Œé€‚åˆé€‰å¡«æé€Ÿ</span></span>
          </div>
        </div>

        <div class="cloze-card">
          <div class="cloze-badge" style="background:linear-gradient(135deg,#991b1b,#c0392b);">âš  æ˜“é”™è­¦ç¤º</div>
          <div class="cloze-body">
            âŒ \(\sin\) æ–¹ç¨‹åªå†™ä¸€æ—è§£ â†’ âœ…
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">å¿…é¡»å†™ä¸¤æ—é€šè§£å†è®¨è®ºå·®å€¼</span></span>
            <br>
            âŒ æ±‚å€¼åŸŸç›´æ¥ä»£ç«¯ç‚¹ â†’ âœ…
            <span class="blank" onclick="revealBlank(this)"><span class="blank-cover">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="blank-answer">å…ˆç®—å†…å±‚è§’èŒƒå›´ï¼Œå†åœ¨å¯¹åº”åŒºé—´æ‰¾ sin æœ€å€¼</span></span>
          </div>
        </div>

      </div>

      <div class="cloze-toolbar">
        <span class="cloze-counter" id="cloze-counter">0 / 9 å·²æ­ç¤º</span>
        <button class="cloze-btn" onclick="revealAllBlanks()">å…¨éƒ¨æ­ç¤º</button>
        <button class="cloze-btn" onclick="resetAllBlanks()">å…¨éƒ¨é‡ç½®</button>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ğŸ”„ ä¿®æ”¹â‘¦ï¼šç¯èŠ‚4 â€” æ ‡å‡†ç­”é¢˜æ ¼å¼
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="screen" id="s4" data-section="4" data-label="æ ‡å‡†ç­”é¢˜æ ¼å¼">
    <div class="screen-inner" style="justify-content:stretch;padding:12px 24px;align-items:stretch;">
      <div class="answer-sheet">
        <div class="answer-title">é«˜è€ƒæ ‡å‡†è§£ç­”</div>
        <div class="answer-q">å·²çŸ¥å‡½æ•° \(f(x)=2\sqrt{3}\sin x\cos x-2\sin^2 x+1\)ï¼Œåˆ™ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯ï¼ˆ ï¼‰</div>

        <div class="answer-line"><span class="label">è§£ï¼š</span>\(\because f(x)=2\sqrt{3}\sin x\cos x-2\sin^2 x+1=\sqrt{3}\sin 2x-(1-\cos 2x)+1\)</div>
        <div class="answer-line">\(=\sqrt{3}\sin 2x+\cos 2x=2\sin\!\left(2x+\dfrac{\pi}{6}\right)\)</div>

        <div class="answer-line" style="margin-top:10px;"><span class="label">éªŒè¯Aï¼š</span>å°† \(f(x)\) å›¾è±¡å‘å³å¹³ç§» \(\dfrac{\pi}{3}\) ä¸ªå•ä½é•¿åº¦ï¼Œå¾—</div>
        <div class="answer-line">\(y=2\sin\!\left(2\!\left(x-\dfrac{\pi}{3}\right)+\dfrac{\pi}{6}\right)=2\sin\!\left(2x-\dfrac{\pi}{2}\right)=-2\cos 2x\neq 2\cos 2x\)</div>
        <div class="answer-line">\(\therefore\) A é”™è¯¯ã€‚</div>

        <div class="answer-line" style="margin-top:10px;"><span class="label">éªŒè¯Bï¼š</span>å½“ \(x\in\left[0,\dfrac{\pi}{4}\right]\) æ—¶ï¼Œ\(2x+\dfrac{\pi}{6}\in\left[\dfrac{\pi}{6},\dfrac{2\pi}{3}\right]\)</div>
        <div class="answer-line">\(\therefore \sin\!\left(2x+\dfrac{\pi}{6}\right)\in\left[\dfrac{1}{2},1\right]\)ï¼Œ\(f(x)\in[1,2]\neq[1,\sqrt{3}]\)</div>
        <div class="answer-line">\(\therefore\) B é”™è¯¯ã€‚</div>

        <div class="answer-line" style="margin-top:10px;"><span class="label">éªŒè¯Cï¼š</span>ç”± \(f(x_1)=f(x_2)=\sqrt{3}\)ï¼Œå¾— \(\sin\!\left(2x+\dfrac{\pi}{6}\right)=\dfrac{\sqrt{3}}{2}\)</div>
        <div class="answer-line">\(\therefore 2x+\dfrac{\pi}{6}=\dfrac{\pi}{3}+2n\pi\) æˆ– \(2x+\dfrac{\pi}{6}=\dfrac{2\pi}{3}+2n\pi\)ï¼ˆ\(n\in\mathbb{Z}\)ï¼‰</div>
        <div class="answer-line">å³ \(x=\dfrac{\pi}{12}+n\pi\) æˆ– \(x=\dfrac{\pi}{4}+n\pi\)</div>
        <div class="answer-line">\(\therefore x_1-x_2\) å¯èƒ½ä¸º \(k\pi\) æˆ– \(k\pi\pm\dfrac{\pi}{6}\)ï¼Œä¸æ’ç­‰äº \(k\pi+\dfrac{\pi}{3}\)</div>
        <div class="answer-line">\(\therefore\) C é”™è¯¯ã€‚</div>

        <div class="answer-line" style="margin-top:10px;"><span class="label">éªŒè¯Dï¼š</span>ä»¤ \(2x+\dfrac{\pi}{6}=k\pi\)ï¼Œå– \(k=0\)ï¼Œå¾— \(x=-\dfrac{\pi}{12}\)</div>
        <div class="answer-line">\(f\!\left(-\dfrac{\pi}{12}\right)=2\sin 0=0\)ï¼Œ\(\therefore\;\left(-\dfrac{\pi}{12},0\right)\) æ˜¯ \(f(x)\) çš„å¯¹ç§°ä¸­å¿ƒã€‚D æ­£ç¡®ã€‚</div>

        <div class="answer-line" style="margin-top:10px;">ç»¼ä¸Šï¼Œ<span class="answer-highlight">\(\text{é€‰ D}\)</span>ã€‚</div>
      </div>
    </div>
  </div>

</div>

<!-- ===== BOTTOM BAR ===== -->
<div id="bottombar">
  <button id="btn-prev-screen" onclick="prevScreen()" data-tip="â† ä¸Šä¸€å±">â—€ ä¸Šä¸€å±</button>
  <button id="btn-prev-step" onclick="prevStep()" data-tip="â†‘ ä¸Šä¸€æ­¥">â–² ä¸Šä¸€æ­¥</button>
  <button id="btn-next-step" onclick="nextStep()" class="primary" data-tip="â†“ ä¸‹ä¸€æ­¥">â–¼ ä¸‹ä¸€æ­¥</button>
  <button id="btn-next-screen" onclick="nextScreen()" data-tip="â†’ ä¸‹ä¸€å±">ä¸‹ä¸€å± â–¶</button>
  <div class="sep"></div>
  <button onclick="changeFontSize(-1)" data-tip="- ç¼©å°å­—å·">Aâˆ’</button>
  <button onclick="changeFontSize(1)" data-tip="+ æ”¾å¤§å­—å·">A+</button>
  <button onclick="autoFit()" data-tip="è‡ªåŠ¨é€‚é…">é€‚é…</button>
  <div class="sep"></div>
  <button onclick="resetAll()" data-tip="R é‡ç½®">âŸ² é‡ç½®</button>
  <div class="sep"></div>
  <button id="btn-cursor" onclick="toggleCursorMode()" data-tip="å¼€å¯é¼ æ ‡èšç„¦">ğŸ”´ èšç„¦</button>
  <button onclick="toggleCursorPanel()" data-tip="èšç„¦è®¾ç½®">âš™</button>
</div>

<script>
// ğŸ”„ ä¿®æ”¹â‘§
const screens=['s1-1','s2-m1','s2-m2','s3','s4'];
const m1Steps=['m1-s1','m1-s2','m1-s3','m1-s4','m1-s5'];
const m2Steps=['m2-s1','m2-s2','m2-s3','m2-s4'];

// ğŸ”’ å›ºå®šå¯¼èˆªé€»è¾‘
let curScreenIdx=0;
let m1Step=0, m2Step=0;
let m1Revealed=0, m2Revealed=0;

function retypeset(){if(window.MathJax&&MathJax.typesetPromise){MathJax.typesetPromise().catch(()=>{});}}
function showScreen(idx){
  if(idx<0||idx>=screens.length)return;
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  curScreenIdx=idx;
  const el=document.getElementById(screens[idx]);
  el.classList.add('active');
  updateProgress();updateButtons();retypeset();
  setTimeout(()=>{requestAnimationFrame(()=>{
    if(screens[idx]==='s2-m1')drawCanvasM1();
    if(screens[idx]==='s2-m2')drawCanvasM2();
  });},50);
}
function nextScreen(){if(curScreenIdx>=screens.length-1)return;showScreen(curScreenIdx+1);}
function prevScreen(){if(curScreenIdx<=0)return;showScreen(curScreenIdx-1);}
function switchMethod(m){if(m===1)showScreen(1);else showScreen(2);}
function getActiveMethod(){
  if(screens[curScreenIdx]==='s2-m1')return 1;
  if(screens[curScreenIdx]==='s2-m2')return 2;
  return 0;
}
function nextStep(){
  const m=getActiveMethod();
  if(m===0){nextScreen();return;}
  if(m===1){if(m1Revealed<m1Steps.length){m1Revealed++;showMethodSteps(1);drawCanvasM1();}else{nextScreen();}}
  else{if(m2Revealed<m2Steps.length){m2Revealed++;showMethodSteps(2);drawCanvasM2();}else{nextScreen();}}
  updateButtons();
}
function prevStep(){
  const m=getActiveMethod();
  if(m===0){prevScreen();return;}
  if(m===1){if(m1Revealed>0){m1Revealed--;showMethodSteps(1);drawCanvasM1();}else prevScreen();}
  else{if(m2Revealed>0){m2Revealed--;showMethodSteps(2);drawCanvasM2();}else prevScreen();}
  updateButtons();
}
function showMethodSteps(m){
  const steps=m===1?m1Steps:m2Steps;
  const revealed=m===1?m1Revealed:m2Revealed;
  const doneId=m===1?'m1-done':'m2-done';
  steps.forEach((id,i)=>{
    const el=document.getElementById(id);
    if(i<revealed){el.classList.add('visible');if(i===revealed-1){el.classList.add('active');el.classList.remove('done');}else{el.classList.remove('active');el.classList.add('done');}}
    else{el.classList.remove('visible','active','done');}
  });
  document.getElementById(doneId).style.display=revealed>=steps.length?'block':'none';
  retypeset();
  const leftPane=document.getElementById(m===1?'left-m1':'left-m2');
  const activeCard=leftPane.querySelector('.step-card.active');
  if(activeCard){activeCard.scrollIntoView({behavior:'smooth',block:'nearest'});}
}
function updateProgress(){
  const s=screens[curScreenIdx];const el=document.getElementById(s);
  const label=el.getAttribute('data-label')||'';const section=el.getAttribute('data-section')||'';
  let txt='ç¯èŠ‚'+section+' Â· '+label;const m=getActiveMethod();
  if(m===1)txt+=' Â· æ­¥éª¤ '+m1Revealed+'/'+m1Steps.length;
  if(m===2)txt+=' Â· æ­¥éª¤ '+m2Revealed+'/'+m2Steps.length;
  document.getElementById('progress-text').textContent=txt;
}
function updateButtons(){
  const prevScr=document.getElementById('btn-prev-screen');
  const nextScr=document.getElementById('btn-next-screen');
  const prevStp=document.getElementById('btn-prev-step');
  const nextStp=document.getElementById('btn-next-step');
  prevScr.disabled=curScreenIdx<=0;nextScr.disabled=curScreenIdx>=screens.length-1;
  const m=getActiveMethod();
  if(m===0){prevStp.style.display='none';nextStp.style.display='none';}
  else{prevStp.style.display='';nextStp.style.display='';
    const steps=m===1?m1Steps:m2Steps;const revealed=m===1?m1Revealed:m2Revealed;
    if(revealed>=steps.length){nextStp.className='green';nextStp.innerHTML='âœ… å®Œæˆ â†’ ä¸‹ä¸€å±';}
    else{nextStp.className='primary';nextStp.innerHTML='â–¼ ä¸‹ä¸€æ­¥';}}
  updateProgress();
}
let fsScale=1;
function changeFontSize(d){fsScale=Math.max(0.7,Math.min(1.5,fsScale+d*0.08));document.documentElement.style.setProperty('--fs-scale',fsScale);retypeset();}
function autoFit(){fsScale=1;document.documentElement.style.setProperty('--fs-scale',1);retypeset();}
function resetAll(){
  m1Revealed=0;m2Revealed=0;
  revealState1=false;revealState2=false;
  document.getElementById('revealCard').classList.remove('revealed');
  document.getElementById('revealCard2').classList.remove('revealed');
  document.getElementById('diffDetailPanel').classList.remove('expanded');
  document.querySelector('.difficulty-strip').classList.remove('expanded');
  resetAllBlanks();
  showMethodSteps(1);showMethodSteps(2);showScreen(0);
}
let revealState1=false, revealState2=false;
function revealConditions(){if(revealState1)return;revealState1=true;document.getElementById('revealCard').classList.add('revealed');retypeset();}
function revealConditions2(){if(revealState2)return;revealState2=true;document.getElementById('revealCard2').classList.add('revealed');retypeset();}
function toggleDiffDetail(){
  const strip=document.querySelector('.difficulty-strip');
  const panel=document.getElementById('diffDetailPanel');
  const isExpanded=panel.classList.contains('expanded');
  if(isExpanded){panel.classList.remove('expanded');strip.classList.remove('expanded');}
  else{panel.classList.add('expanded');strip.classList.add('expanded');retypeset();}
}
function revealNext(){if(curScreenIdx===0){if(!revealState1){revealConditions();return true;}if(!revealState2){revealConditions2();return true;}}return false;}

// ç¯èŠ‚3 æŒ–ç©ºå¡«ç­”
function revealBlank(el){if(el.classList.contains('revealed'))return;el.classList.add('revealed');updateBlankCount();retypeset();}
function revealAllBlanks(){
  const blanks=document.querySelectorAll('.blank');
  blanks.forEach((b,i)=>{setTimeout(()=>{b.classList.add('revealed');updateBlankCount();},i*120);});
  setTimeout(retypeset,blanks.length*120+100);
}
function resetAllBlanks(){document.querySelectorAll('.blank').forEach(b=>b.classList.remove('revealed'));updateBlankCount();}
function updateBlankCount(){
  const total=document.querySelectorAll('.blank').length;
  const revealed=document.querySelectorAll('.blank.revealed').length;
  const counter=document.getElementById('cloze-counter');
  if(counter)counter.textContent=revealed+' / '+total+' å·²æ­ç¤º';
}

document.addEventListener('keydown',e=>{
  if(e.key===' '||e.key==='Spacebar'){e.preventDefault();if(!revealNext())nextScreen();}
  else if(e.key==='ArrowRight')nextScreen();
  else if(e.key==='ArrowLeft')prevScreen();
  else if(e.key==='ArrowDown'){e.preventDefault();nextStep();}
  else if(e.key==='ArrowUp'){e.preventDefault();prevStep();}
  else if(e.key==='+'||e.key==='=')changeFontSize(1);
  else if(e.key==='-')changeFontSize(-1);
  else if(e.key.toLowerCase()==='r')resetAll();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ”„ ä¿®æ”¹â‘¨ï¼šGeoGebra ç»˜å›¾ï¼ˆåˆ†æ å¸ƒå±€æ–¹æ³•ä½¿ç”¨ï¼‰
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let ggbApi = null;
let ggbReady = false;
let ggbInjected = false;

// ğŸ”„ æŒ‰æ­¥éª¤æ³¨å†Œå¯¹è±¡åï¼ˆä¸ m2Steps ä¸€ä¸€å¯¹åº”ï¼‰
const step1Objs = ['s1_func','s1_z1','s1_max','s1_z2','s1_min','s1_z3','s1_lbl','s1_lblM','s1_lblm','s1_lblZ1','s1_lblZ2'];
const step2Objs = ['s2_segL','s2_segR','s2_ptL','s2_ptR','s2_ptMax','s2_lineMax','s2_lblRange','s2_fill1','s2_fill2'];
const step3Objs = ['s3_ptSym','s3_lbl'];
const step4Objs = ['s4_lineY','s4_pt1','s4_pt2','s4_seg','s4_lbl'];

const allStepObjs = [step1Objs, step2Objs, step3Objs, step4Objs];

function ggbShow(name){ try{ ggbApi.setVisible(name, true); }catch(e){} }
function ggbHide(name){ try{ ggbApi.setVisible(name, false); }catch(e){} }

// ğŸ”„ setupGGBï¼šåˆ›å»ºæ‰€æœ‰ GeoGebra å¯¹è±¡
function setupGGB(){
  const a = ggbApi;

  // â”€â”€ åæ ‡ç³»è®¾ç½® â”€â”€
  a.setCoordSystem(-0.8, 4.2, -2.8, 2.8);
  a.setAxesVisible(true, true);
  a.setGridVisible(false);
  a.enableRightClick(false);
  try{ a.setPerspective("G"); }catch(e){}

  // â•â•â•â•â•â• è¾…åŠ©å‡½æ•° â•â•â•â•â•â•
  function T(name, text, x, y, rgb, sz, bold){
    try{
    a.evalCommand(name + '=Text("' + text + '",(' + x + ',' + y + '))');
    a.setColor(name, rgb[0], rgb[1], rgb[2]);
    if(sz) try{ a.setFontSize(name, sz); }catch(e2){}
    if(bold) try{ a.setFontStyle(name, 1); }catch(e2){}
    a.setVisible(name, false); a.setFixed(name, true); a.setLabelVisible(name, false);
    }catch(e){ console.warn('T fail:', name, e); }
  }
  function P(name, x, y, rgb, sz, sty){
    try{
    a.evalCommand(name + '=(' + x + ',' + y + ')');
    a.setColor(name, rgb[0], rgb[1], rgb[2]);
    a.setPointSize(name, sz||5);
    if(sty!==undefined) a.setPointStyle(name, sty);
    a.setVisible(name, false); a.setFixed(name, true); a.setLabelVisible(name, false);
    }catch(e){ console.warn('P fail:', name, e); }
  }
  function S(name, x1, y1, x2, y2, rgb, th, ds){
    try{
    a.evalCommand(name + '=Segment((' + x1 + ',' + y1 + '),(' + x2 + ',' + y2 + '))');
    a.setColor(name, rgb[0], rgb[1], rgb[2]);
    a.setLineThickness(name, th||2); a.setLineStyle(name, ds||0);
    a.setVisible(name, false); a.setFixed(name, true); a.setLabelVisible(name, false);
    }catch(e){ console.warn('S fail:', name, e); }
  }
  function Ln(name, x1, y1, x2, y2, rgb, th, ds){
    try{
    a.evalCommand(name + '=Line((' + x1 + ',' + y1 + '),(' + x2 + ',' + y2 + '))');
    a.setColor(name, rgb[0], rgb[1], rgb[2]);
    a.setLineThickness(name, th||2); a.setLineStyle(name, ds||0);
    a.setVisible(name, false); a.setFixed(name, true); a.setLabelVisible(name, false);
    }catch(e){ console.warn('Ln fail:', name, e); }
  }

  // é¢œè‰²å¸¸é‡
  var BLUE = [43,87,151];
  var GOLD = [194,132,26], GOLD_D = [146,64,14];
  var RED = [192,57,43];
  var GREEN = [22,163,74], GREEN_D = [21,128,61];
  var GRAY = [148,163,184], GRAY_D = [100,116,139];
  var PURP = [107,33,168], PURP_D = [88,28,135];

  // Ï€ å¸¸é‡
  var PI = Math.PI;

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  Step 1 â€” ç”»å‡ºå‡½æ•°å›¾åƒ + å…³é”®ç‚¹
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  try{
    a.evalCommand('s1_func(x) = 2*sin(2*x + pi/6)');
    a.setColor('s1_func', BLUE[0], BLUE[1], BLUE[2]);
    a.setLineThickness('s1_func', 5);
    a.setVisible('s1_func', false);
    a.setLabelVisible('s1_func', false);
  }catch(e){ console.warn('func fail', e); }

  // é›¶ç‚¹1: (-Ï€/12, 0) â‰ˆ (-0.2618, 0)
  P('s1_z1', (-PI/12).toFixed(4), '0', GREEN, 7, 0);
  // æœ€é«˜ç‚¹: (Ï€/6, 2) â‰ˆ (0.5236, 2)
  P('s1_max', (PI/6).toFixed(4), '2', RED, 8, 0);
  // é›¶ç‚¹2: (5Ï€/12, 0) â‰ˆ (1.3090, 0)
  P('s1_z2', (5*PI/12).toFixed(4), '0', GREEN, 7, 0);
  // æœ€ä½ç‚¹: (2Ï€/3, -2) â‰ˆ (2.0944, -2)
  P('s1_min', (2*PI/3).toFixed(4), '-2', PURP, 7, 0);
  // é›¶ç‚¹3: (11Ï€/12, 0) â‰ˆ (2.8798, 0)
  P('s1_z3', (11*PI/12).toFixed(4), '0', GREEN, 6, 0);

  // æ ‡ç­¾
  T('s1_lbl', 'f(x) = 2sin(2x + Ï€/6)', 1.8, 2.4, BLUE, 3, true);
  T('s1_lblM', '(Ï€/6, 2)', (PI/6 + 0.15).toFixed(4), '2.25', RED, 2, true);
  T('s1_lblm', '(2Ï€/3, âˆ’2)', (2*PI/3 + 0.15).toFixed(4), '-2.35', PURP, 2, false);
  T('s1_lblZ1', 'âˆ’Ï€/12', (-PI/12 - 0.05).toFixed(4), '-0.35', GREEN_D, 2, false);
  T('s1_lblZ2', '5Ï€/12', (5*PI/12 - 0.05).toFixed(4), '-0.35', GREEN_D, 2, false);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  Step 2 â€” éªŒè¯ A & Bï¼ˆåŒºé—´+å€¼åŸŸï¼‰
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ç«–è™šçº¿æ ‡è®°åŒºé—´ [0, Ï€/4]
  S('s2_segL', '0', '-2.5', '0', '2.5', GRAY, 2, 2);
  S('s2_segR', (PI/4).toFixed(4), '-2.5', (PI/4).toFixed(4), '2.5', GRAY, 2, 2);
  // ç«¯ç‚¹å€¼
  P('s2_ptL', '0', '1', GOLD, 7, 0);                         // f(0)=1
  P('s2_ptR', (PI/4).toFixed(4), (Math.sqrt(3)).toFixed(4), GOLD, 7, 0); // f(Ï€/4)=âˆš3
  P('s2_ptMax', (PI/6).toFixed(4), '2', GOLD, 8, 0);          // f(Ï€/6)=2 æœ€å¤§å€¼
  // æ°´å¹³è™šçº¿ y=2
  S('s2_lineMax', '-0.5', '2', '1.5', '2', RED, 2, 2);
  // å€¼åŸŸæ ‡ç­¾
  T('s2_lblRange', 'å€¼åŸŸ [1, 2] â‰  [1, âˆš3]', 0.05, '1.35', RED, 3, true);
  // åŒºé—´å¡«å……çº¿æ®µï¼ˆè¡¨ç¤ºåŒºé—´èŒƒå›´ï¼‰
  S('s2_fill1', '0', '-0.08', (PI/4).toFixed(4), '-0.08', GOLD, 4, 0);
  S('s2_fill2', '0', '0.08', (PI/4).toFixed(4), '0.08', GOLD, 4, 0);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  Step 3 â€” éªŒè¯ Dï¼ˆå¯¹ç§°ä¸­å¿ƒï¼‰
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  P('s3_ptSym', (-PI/12).toFixed(4), '0', GOLD, 10, 0);
  T('s3_lbl', 'å¯¹ç§°ä¸­å¿ƒ (âˆ’Ï€/12, 0) âœ”', (-PI/12 + 0.12).toFixed(4), '0.4', GOLD_D, 3, true);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  Step 4 â€” éªŒè¯ Cï¼ˆæ–¹ç¨‹è§£å·®å€¼ï¼‰
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // æ°´å¹³çº¿ y = âˆš3
  S('s4_lineY', '-0.5', (Math.sqrt(3)).toFixed(4), '4', (Math.sqrt(3)).toFixed(4), PURP, 3, 2);
  // äº¤ç‚¹1: (Ï€/12, âˆš3)
  P('s4_pt1', (PI/12).toFixed(4), (Math.sqrt(3)).toFixed(4), RED, 8, 0);
  // äº¤ç‚¹2: (Ï€/4, âˆš3)
  P('s4_pt2', (PI/4).toFixed(4), (Math.sqrt(3)).toFixed(4), RED, 8, 0);
  // è¿æ¥ä¸¤äº¤ç‚¹
  S('s4_seg', (PI/12).toFixed(4), (Math.sqrt(3)).toFixed(4), (PI/4).toFixed(4), (Math.sqrt(3)).toFixed(4), RED, 3, 0);
  // æ ‡ç­¾
  T('s4_lbl', 'é—´è· = Ï€/6 â‰  Ï€/3', ((PI/12+PI/4)/2 - 0.3).toFixed(4), (Math.sqrt(3)+0.35).toFixed(4), RED, 3, true);

  // â”€â”€ åˆå§‹éšè— â”€â”€
  allStepObjs.flat().forEach(ggbHide);
}

// ğŸ”„ banner æ–‡å­—
const bannerTexts = [
  '',
  'Step 1 Â· f(x) = 2sin(2x+Ï€/6) å›¾åƒä¸å…³é”®ç‚¹',
  'Step 2 Â· åŒºé—´ [0, Ï€/4] å€¼åŸŸåˆ†æï¼šæœ€å¤§å€¼æ˜¯2ä¸æ˜¯âˆš3',
  'Step 3 Â· å¯¹ç§°ä¸­å¿ƒ (âˆ’Ï€/12, 0) éªŒè¯é€šè¿‡ âœ”',
  'Step 4 Â· y=âˆš3 æ°´å¹³çº¿äº¤ç‚¹é—´è· = Ï€/6 â‰  Ï€/3',
];

function updateGGBVisibility(){
  if(!ggbReady || !ggbApi) return;
  const banner = document.getElementById('canvas-banner-m2');
  allStepObjs.flat().forEach(ggbHide);

  for(let i = 0; i < allStepObjs.length; i++){
    if(m2Revealed >= i + 1){
      allStepObjs[i].forEach(ggbShow);
      if(banner && bannerTexts[i+1]){ banner.style.display='block'; banner.textContent = bannerTexts[i+1]; }
    }
  }
  if(m2Revealed === 0 && banner){ banner.style.display='none'; }
}

function tryInitGeoGebra(){
  if(ggbInjected) return;
  var container = document.getElementById('ggb-m2');
  if(!container) return;
  var rect = container.getBoundingClientRect();
  if(rect.width < 50 || rect.height < 50) return;
  ggbInjected = true;

  var params = {
    "appName": "classic",
    "width": Math.round(rect.width),
    "height": Math.round(rect.height),
    "perspective": "G",
    "showToolBar": false,
    "showAlgebraInput": false,
    "showMenuBar": false,
    "showZoomButtons": false,
    "enableRightClick": false,
    "enableShiftDragZoom": false,
    "enableLabelDrags": false,
    "showResetIcon": false,
    "language": "zh",
    "borderColor": "transparent",
    "appletOnLoad": function(api){
      ggbApi = api;
      ggbReady = false;
      setTimeout(function(){
        setupGGB();
        ggbReady = true;
        updateGGBVisibility();
      }, 300);
    }
  };
  var applet = new GGBApplet(params, true);
  applet.inject('ggb-m2');
}

function drawCanvasM1(){/* å…¨å®½å¸ƒå±€ä¸éœ€è¦å›¾å½¢ */}

function drawCanvasM2(){
  if(!ggbInjected){ tryInitGeoGebra(); return; }
  updateGGBVisibility();
}

function init(){showScreen(0);showMethodSteps(1);showMethodSteps(2);updateButtons();updateBlankCount();retypeset();}
window.addEventListener('load',init);
window.addEventListener('resize',function(){
  if(screens[curScreenIdx]==='s2-m1')drawCanvasM1();
  if(screens[curScreenIdx]==='s2-m2')drawCanvasM2();
});

// åˆ‡å±æ—¶è‡ªåŠ¨åˆå§‹åŒ– GeoGebraï¼ˆé¦–æ¬¡è¿›å…¥æ–¹æ³•äºŒæ—¶è§¦å‘ï¼‰
var _origShowScreen = showScreen;
showScreen = function(idx){
  _origShowScreen(idx);
  if(screens[idx] === 's2-m2'){
    if(!ggbInjected) setTimeout(tryInitGeoGebra, 100);
    else updateGGBVisibility();
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ”’ é¼ æ ‡èšç„¦ç³»ç»Ÿï¼ˆæ¡†æ¶å›ºå®šï¼Œä¸è¦ä¿®æ”¹ï¼‰
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var cursorMode=false,cursorSpot=null;
var cursorConf={size:38,colorSolid:'#c0392b',trail:false};
function createCursorElements(){if(cursorSpot)return;cursorSpot=document.createElement('div');cursorSpot.className='cursor-spot';document.body.appendChild(cursorSpot);}
function toggleCursorMode(){
  cursorMode=!cursorMode;var btn=document.getElementById('btn-cursor');createCursorElements();
  if(cursorMode){cursorSpot.classList.add('active');document.body.classList.add('cursor-mode-on');btn.classList.add('cursor-active');btn.innerHTML='ğŸ”´ å…³é—­èšç„¦';}
  else{cursorSpot.classList.remove('active');document.body.classList.remove('cursor-mode-on');btn.classList.remove('cursor-active');btn.innerHTML='ğŸ”´ èšç„¦';}
}
function toggleCursorPanel(){document.getElementById('cursorPanel').classList.toggle('show');}
function applyCursorColor(solidStr){
  cursorConf.colorSolid=solidStr;updateSpotStyle();
  document.querySelectorAll('.cursor-color-btn').forEach(function(b){b.classList.toggle('chosen',b.getAttribute('data-solid')===solidStr);});
}
function updateSpotStyle(){
  if(!cursorSpot)return;var sz=cursorConf.size;cursorSpot.style.width=sz+'px';cursorSpot.style.height=sz+'px';
  var c=cursorConf.colorSolid,r=parseInt(c.slice(1,3),16),g=parseInt(c.slice(3,5),16),b=parseInt(c.slice(5,7),16);
  cursorSpot.style.borderColor='rgba('+r+','+g+','+b+',0.85)';
  cursorSpot.style.background='radial-gradient(circle, rgba('+r+','+g+','+b+',0.10) 0%, transparent 70%)';
  cursorSpot.style.boxShadow='0 0 12px 2px rgba('+r+','+g+','+b+',0.18)';
}
function setCursorSize(val){cursorConf.size=parseInt(val);updateSpotStyle();document.getElementById('sizeVal').textContent=val+'px';}
function toggleTrail(){cursorConf.trail=!cursorConf.trail;document.getElementById('trailToggle').classList.toggle('on',cursorConf.trail);}
document.addEventListener('mousemove',function(e){
  if(!cursorMode||!cursorSpot)return;cursorSpot.style.left=e.clientX+'px';cursorSpot.style.top=e.clientY+'px';
  if(cursorConf.trail){var dot=document.createElement('div');dot.className='cursor-trail';var c=cursorConf.colorSolid,r=parseInt(c.slice(1,3),16),g=parseInt(c.slice(3,5),16),b=parseInt(c.slice(5,7),16);dot.style.background='rgba('+r+','+g+','+b+',0.30)';dot.style.left=e.clientX+'px';dot.style.top=e.clientY+'px';document.body.appendChild(dot);setTimeout(function(){dot.remove();},450);}
});
document.addEventListener('mousedown',function(e){
  if(!cursorMode)return;if(cursorSpot)cursorSpot.classList.add('clicking');
  var rip=document.createElement('div');rip.className='click-ripple';var c=cursorConf.colorSolid,r=parseInt(c.slice(1,3),16),g=parseInt(c.slice(3,5),16),b=parseInt(c.slice(5,7),16);rip.style.background='rgba('+r+','+g+','+b+',0.40)';rip.style.left=e.clientX+'px';rip.style.top=e.clientY+'px';document.body.appendChild(rip);setTimeout(function(){rip.remove();},550);
});
document.addEventListener('mouseup',function(){if(cursorSpot)cursorSpot.classList.remove('clicking');});
document.addEventListener('mouseleave',function(){if(cursorSpot)cursorSpot.style.opacity='0';});
document.addEventListener('mouseenter',function(){if(cursorMode&&cursorSpot)cursorSpot.style.opacity='1';});
</script>

<!-- ğŸ”’ èšç„¦è®¾ç½®é¢æ¿ï¼ˆæ¡†æ¶å›ºå®šï¼Œä¸è¦ä¿®æ”¹ï¼‰ -->
<div class="cursor-panel" id="cursorPanel">
  <h4>ğŸ¯ é¼ æ ‡èšç„¦è®¾ç½®</h4>
  <label>å¤§å°<input type="range" min="24" max="80" value="38" oninput="setCursorSize(this.value)"><span class="val" id="sizeVal">38px</span></label>
  <label style="margin-bottom:6px;">é¢œè‰²</label>
  <div class="color-row">
    <div class="cursor-color-btn chosen" style="background:#c0392b;" data-solid="#c0392b" onclick="applyCursorColor('#c0392b')"></div>
    <div class="cursor-color-btn" style="background:#c2841a;" data-solid="#c2841a" onclick="applyCursorColor('#c2841a')"></div>
    <div class="cursor-color-btn" style="background:#2b5797;" data-solid="#2b5797" onclick="applyCursorColor('#2b5797')"></div>
    <div class="cursor-color-btn" style="background:#16a34a;" data-solid="#16a34a" onclick="applyCursorColor('#16a34a')"></div>
    <div class="cursor-color-btn" style="background:#6b21a8;" data-solid="#6b21a8" onclick="applyCursorColor('#6b21a8')"></div>
    <div class="cursor-color-btn" style="background:#e74c3c;" data-solid="#e74c3c" onclick="applyCursorColor('#e74c3c')"></div>
  </div>
  <div class="toggle-row"><label style="margin:0;">ç§»åŠ¨è½¨è¿¹</label><button class="mini-toggle" id="trailToggle" onclick="toggleTrail()"></button></div>
</div>
</body>
</html>
